# Απομακρυσμένη σύνδεση

Η απομακρυσμένη σύνδεση μιας μηχανής Α στην μηχανή Β απαιτεί η μηχανή Β:

1. Να έχει στατική IP, ή να χρησιμοποιεί μία υπηρεσία όπως no-ip
2. Να έχει ανοίξει την θύρα (port forwarding) που θέλει να χρησιμοποιήσει η μηχανή Α.

Επειδή το σενάριο αυτό είναι επισφαλές ( καθώς εκθέτει την μηχανή Β μέσω της ανοικτής θύρας στο διαδίκτυο), η καλύτερη λύση είναι η δημιουργία ενός δικτύου mesh. 

# Δίκτυο mesh

Για τον σκοπό αυτό χρησιμοποιούμε την υπηρεσία **Tailscale** (δωρεάν λογαριασμός). Η Tailscape δημιουργεί ένα δίκτυο μεταξύ των μηχανών (κόμβων), οι οποίοι συνδέονται απευθείας μεταξύ τους χωρίς ενδιάμεσο διακομιστή (*mesh network*).

## Εγκατάσταση

1. Κάθε μηχανή εγκαθιστά το Tailscale από τον [επίσημη ιστοσελίδα](https://tailscale.com/). Ο δωρεάν λογαριασμός επιτρέπει την σύνδεση μέχρι 3 χρηστών.
2. Από την κεντρική σελίδα "Machines", η μηχανή Β διαμοιράζει (share) την πρόσβαση της μηχανής της στέλνοντας ένα σύνδεσμο στην μηχανή Α.
3. Η μηχανή Α αποδέχεται τον σύνδεσμο και η μηχανή Β εμφανίζεται στην λίστα μηχανών της Α με την ένδειξη "Shared in".

## Ρυθμίσεις

1. Απενεργοποίηση του key expiry (στο μενού με τις 3 τελείες δίπλα σε κάθε μηχανή).
2. DNS -> Nameservers -> Glocal Nameservers -> Επιλογή του Cloudflare DNS.
3. DNS -> Nameservers -> Override DNS servers -> Ενεργοποίηση. Με αυτό τον τρόπο παρακάμπτει τους DNS servers που έχουν οριστεί στο τοπικό δίκτυο ή στις μηχανές.  


## Χαρακτηριστικά

Κάθε μηχανή στο δίκτυο mesh έχει το δικό της όνομα (που μπορεί να το αλλάξει ο χρήστης) και μία μοναδική διεύθυνση IP η οποία δεν αλλάζει (παρά μόνον αν αφαιρεθεί η συσκευή από το δίκτυο).

# Σύνδεση μέσω SSH

Προϋποθέτει ότι το SSH έχει εγκατασταθεί και στις δύο μηχανές (δες εδώ). Η σύνδεση γίνεται ως εξής:

Από την μηχανή Α εκτελώ τον σύνδεσμο `ssh <username>@<ip>`,

όπου

- `<username>` είναι το όνομα του χρήστη στην μηχανή Β
- `<ip>` είναι διεύθυνση IP της μηχανής Β στο δίκτυο mesh. 

Αντί της διεύθυνσης IP μπορεί να χρησιμοποιηθεί το μοναδικό αναγνωριστικό της μηχανής Β στο δίκτυο mesh που αποτελείται από το όνομα της μηχανής και το domain name του δικτύου mesh. Για παράδειγμα, `mymachine.tail7dfh9.ts.net`.

# Σύνδεση μέσω VNC

Απαιτείται η εγκατάσταση του VNC στην μηχανή Β (δες [εδώ](vnc.md)). Έπειτα με την βοήθεια ενός remote desktop client (π.χ. Remmina) στην μηχανή Α κάνουμε τα εξής:

1. Δημιουργούμε ένα νέο Connection Profile. 
2. Επιλέγουμε VNC ως Protocol.
3. Στο πεδίο "Server" εισάγουμε το μοναδικό αναγνωριστικό της μηχανής Β στο δίκτυο mesh που αποτελείται από το όνομα της μηχανής και το domain name του δικτύου mesh. Για παράδειγμα, `mymachine.tail7dfh9.ts.net`.
4. Αφήνουμε το πεδίο "User Name" κενό.
5. Στο πεδίο "Password" εισάγουμε τον κωδικό πρόσβασης που έχουμε ορίσει για την υπηρεσία VNC της μηχανής Β.
6. Αποθηκεύουμε το Connection Profile και συνδεόμαστε. 